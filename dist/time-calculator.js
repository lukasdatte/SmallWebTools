$(() => {
    const input = $("#input");
    input.on("input keydown keyup mousedown mouseup select contextmenu drop", () => {
        debugger;
        let val = input.val().toString().replace(/[^\d:+-\s]/g, "");
        input.val(val);
        //collapse signs
        const times = [];
        const split = val.split(/(?=[-+])/);
        let negative = false;
        for (let s of split) {
            switch (s) {
                case "+":
                    break;
                case "-":
                    negative = !negative;
                    break;
                default:
                    if (s.length == 0)
                        break;
                    if (s.charAt(0) == "-")
                        negative = !negative;
                    times.push(Time.fromString(s, negative));
                    negative = false;
                    break;
            }
        }
        //calc result
        const resultTime = new Time(0, 0);
        for (let time of times) {
            resultTime.add(time);
        }
        $("#output").text(resultTime.toString());
    });
});
class Time {
    constructor(hour, minute, positive = null) {
        let cleanTime = Time.cleanTime(hour, minute);
        this.hour = cleanTime.hour;
        this.minute = cleanTime.minute;
        let newPositive;
        if (positive != null) {
            if (cleanTime.positive == false && positive)
                throw new Error("Illegales Argument, Munite und Stunden vorzeichen negativ passt nicht f√ºr das gegebene positive vorzeichen");
            newPositive = positive;
        }
        else
            newPositive = cleanTime.positive;
        this.positive = newPositive;
    }
    add(t) {
        let cleanTime = Time.cleanTime(0, this.asMinutes() + t.asMinutes());
        this.hour = cleanTime.hour;
        this.minute = cleanTime.minute;
        this.positive = cleanTime.positive;
    }
    toString() {
        return `${this.positive ? "" : "-"}${this.hour}:${this.minute}h  ${this.positive ? "" : "-"}${this.hour * 60 + this.minute}min`;
    }
    asMinutes() {
        return (this.hour * 60 + this.minute) * (this.positive ? 1 : -1);
    }
    static cleanTime(hour, minute) {
        let positive = true;
        if (hour < 0 || minute < 0) {
            if (hour != 0 && minute != 0 && hour < 0 != minute < 0)
                return null;
            positive = false;
            hour *= -1;
            minute *= -1;
        }
        let minutesExclHours = minute % 60;
        hour = hour + (minute - minutesExclHours) / 60;
        minute = minutesExclHours;
        return { hour: hour, minute: minute, positive: positive };
    }
    static fromString(string, forcedNegative = false) {
        string = string.replace(/[^\d:]/g, "");
        const numbers = string.split(":");
        if (numbers.length == 1)
            return new Time(0, Number.parseInt(numbers[0]), !forcedNegative);
        if (numbers.length == 2) {
            return new Time(Number.parseInt(numbers[0]), Number.parseInt(numbers[1]), !forcedNegative);
        }
        return null;
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,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LEdBQUcsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDL0MsTUFBTSxHQUFHLGdCQUFnQixDQUFDO1FBQzFCLE9BQU8sRUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQWUsRUFBRSxjQUFjLEdBQUcsS0FBSztRQUNyRCxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUMsRUFBRSxDQUFDLENBQUM7UUFDdEMsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQyxJQUFHLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQztZQUNsQixPQUFPLElBQUksSUFBSSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDckUsSUFBRyxPQUFPLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtZQUNwQixPQUFPLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQzlGO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztDQUNKIiwiZmlsZSI6InRpbWUtY2FsY3VsYXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xyXG4gICAgY29uc3QgaW5wdXQgPSAkKFwiI2lucHV0XCIpO1xyXG4gICAgaW5wdXQub24oXCJpbnB1dCBrZXlkb3duIGtleXVwIG1vdXNlZG93biBtb3VzZXVwIHNlbGVjdCBjb250ZXh0bWVudSBkcm9wXCIsICgpID0+IHtcclxuICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICBsZXQgdmFsID0gaW5wdXQudmFsKCkudG9TdHJpbmcoKS5yZXBsYWNlKC9bXlxcZDorLVxcc10vZyxcIlwiKTtcclxuICAgICAgICBpbnB1dC52YWwodmFsKTtcclxuXHJcbiAgICAgICAgLy9jb2xsYXBzZSBzaWduc1xyXG4gICAgICAgIGNvbnN0IHRpbWVzIDogVGltZVtdID0gW107XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSB2YWwuc3BsaXQoLyg/PVstK10pLyk7XHJcblxyXG4gICAgICAgIGxldCBuZWdhdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAobGV0IHMgb2Ygc3BsaXQpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiK1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIi1cIjpcclxuICAgICAgICAgICAgICAgICAgICBuZWdhdGl2ZSA9ICFuZWdhdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocy5sZW5ndGggPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocy5jaGFyQXQoMCkgPT0gXCItXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZ2F0aXZlID0gIW5lZ2F0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzLnB1c2goVGltZS5mcm9tU3RyaW5nKHMsIG5lZ2F0aXZlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVnYXRpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jYWxjIHJlc3VsdFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdFRpbWUgPSBuZXcgVGltZSgwLDApO1xyXG4gICAgICAgIGZvciAobGV0IHRpbWUgb2YgdGltZXMpIHtcclxuICAgICAgICAgICAgcmVzdWx0VGltZS5hZGQodGltZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiI291dHB1dFwiKS50ZXh0KHJlc3VsdFRpbWUudG9TdHJpbmcoKSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jbGFzcyBUaW1lIHtcclxuICAgIHBvc2l0aXZlOiBib29sZWFuO1xyXG4gICAgaG91cjogbnVtYmVyO1xyXG4gICAgbWludXRlOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaG91cjogbnVtYmVyLCBtaW51dGU6IG51bWJlciwgcG9zaXRpdmUgOiBib29sZWFuID0gbnVsbCkge1xyXG4gICAgICAgIGxldCBjbGVhblRpbWUgPSBUaW1lLmNsZWFuVGltZShob3VyLCBtaW51dGUpO1xyXG4gICAgICAgIHRoaXMuaG91ciA9IGNsZWFuVGltZS5ob3VyO1xyXG4gICAgICAgIHRoaXMubWludXRlID0gY2xlYW5UaW1lLm1pbnV0ZTtcclxuXHJcbiAgICAgICAgbGV0IG5ld1Bvc2l0aXZlO1xyXG4gICAgICAgIGlmKHBvc2l0aXZlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKGNsZWFuVGltZS5wb3NpdGl2ZSA9PSBmYWxzZSAmJiBwb3NpdGl2ZSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWxlcyBBcmd1bWVudCwgTXVuaXRlIHVuZCBTdHVuZGVuIHZvcnplaWNoZW4gbmVnYXRpdiBwYXNzdCBuaWNodCBmw7xyIGRhcyBnZWdlYmVuZSBwb3NpdGl2ZSB2b3J6ZWljaGVuXCIpO1xyXG4gICAgICAgICAgICBuZXdQb3NpdGl2ZSA9IHBvc2l0aXZlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIG5ld1Bvc2l0aXZlID0gY2xlYW5UaW1lLnBvc2l0aXZlO1xyXG4gICAgICAgIHRoaXMucG9zaXRpdmUgPSBuZXdQb3NpdGl2ZTtcclxuICAgIH1cclxuXHJcbiAgICBhZGQgKHQgOiBUaW1lKXtcclxuICAgICAgICBsZXQgY2xlYW5UaW1lID0gVGltZS5jbGVhblRpbWUoMCwgdGhpcy5hc01pbnV0ZXMoKSArIHQuYXNNaW51dGVzKCkpO1xyXG4gICAgICAgIHRoaXMuaG91ciA9IGNsZWFuVGltZS5ob3VyO1xyXG4gICAgICAgIHRoaXMubWludXRlID0gY2xlYW5UaW1lLm1pbnV0ZTtcclxuICAgICAgICB0aGlzLnBvc2l0aXZlID0gY2xlYW5UaW1lLnBvc2l0aXZlO1xyXG4gICAgfVxyXG5cclxuICAgIHRvU3RyaW5nICgpIHtcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5wb3NpdGl2ZSA/IFwiXCIgOiBcIi1cIn0ke3RoaXMuaG91cn06JHt0aGlzLm1pbnV0ZX1oICAke3RoaXMucG9zaXRpdmUgPyBcIlwiIDogXCItXCJ9JHt0aGlzLmhvdXIqNjAgKyB0aGlzLm1pbnV0ZX1taW5gO1xyXG4gICAgfVxyXG5cclxuICAgIGFzTWludXRlcygpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuaG91ciAqIDYwICsgdGhpcy5taW51dGUpICogKHRoaXMucG9zaXRpdmUgPyAxIDogLTEpXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNsZWFuVGltZShob3VyOiBudW1iZXIsIG1pbnV0ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IHBvc2l0aXZlID0gdHJ1ZTtcclxuICAgICAgICBpZihob3VyIDwgMCB8fCBtaW51dGUgPCAwKXtcclxuICAgICAgICAgICAgaWYoaG91ciAhPSAwICYmIG1pbnV0ZSAhPSAwICYmIGhvdXIgPCAwICE9IG1pbnV0ZSA8IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgcG9zaXRpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaG91ciAqPSAtMTtcclxuICAgICAgICAgICAgbWludXRlICo9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbWludXRlc0V4Y2xIb3VycyA9IG1pbnV0ZSAlIDYwO1xyXG4gICAgICAgIGhvdXIgPSBob3VyICsgKG1pbnV0ZSAtIG1pbnV0ZXNFeGNsSG91cnMpIC8gNjA7XHJcbiAgICAgICAgbWludXRlID0gbWludXRlc0V4Y2xIb3VycztcclxuICAgICAgICByZXR1cm4ge2hvdXI6IGhvdXIsIG1pbnV0ZTogbWludXRlLCBwb3NpdGl2ZTogcG9zaXRpdmV9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tU3RyaW5nKHN0cmluZyA6IHN0cmluZywgZm9yY2VkTmVnYXRpdmUgPSBmYWxzZSkgOiBUaW1lIHtcclxuICAgICAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvW15cXGQ6XS9nLFwiXCIpO1xyXG4gICAgICAgIGNvbnN0IG51bWJlcnMgPSBzdHJpbmcuc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgIGlmKG51bWJlcnMubGVuZ3RoID09IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGltZSgwLCBOdW1iZXIucGFyc2VJbnQobnVtYmVyc1swXSksICFmb3JjZWROZWdhdGl2ZSk7XHJcbiAgICAgICAgaWYobnVtYmVycy5sZW5ndGggPT0gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpbWUoTnVtYmVyLnBhcnNlSW50KG51bWJlcnNbMF0pLCBOdW1iZXIucGFyc2VJbnQobnVtYmVyc1sxXSksICFmb3JjZWROZWdhdGl2ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiJtb2R1bGVzL25wY092ZXJoYXVsc1BhdGNoZXIvc3JjLyJ9
